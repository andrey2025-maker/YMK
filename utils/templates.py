"""
–®–∞–±–ª–æ–Ω—ã —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.
–°–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π –±–æ—Ç–∞.
"""
from typing import Dict, Any, Optional

from utils.constants import (
    TEMPLATE_NO_PERMISSION, TEMPLATE_INVALID_FORMAT, TEMPLATE_NOT_FOUND,
    TEMPLATE_ALREADY_EXISTS, TEMPLATE_VALIDATION_FAILED, TEMPLATE_OPERATION_SUCCESS,
    TEMPLATE_OPERATION_FAILED, TEMPLATE_CONFIRM_DELETE, TEMPLATE_CONFIRM_ACTION,
    TEMPLATE_WELCOME, TEMPLATE_HELP, TEMPLATE_COMMANDS_LIST
)


class TemplateStore:
    """
    –•—Ä–∞–Ω–∏–ª–∏—â–µ —à–∞–±–ª–æ–Ω–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π.
    """
    
    # –®–∞–±–ª–æ–Ω—ã –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ (–æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫)
    TEMPLATES_RU = {
        # –û–±—â–∏–µ –æ—à–∏–±–∫–∏
        TEMPLATE_NO_PERMISSION: "‚ùå –£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã.",
        TEMPLATE_INVALID_FORMAT: "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–≤–æ–¥.",
        TEMPLATE_NOT_FOUND: "‚ùå –û–±—ä–µ–∫—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω.",
        TEMPLATE_ALREADY_EXISTS: "‚ùå –û–±—ä–µ–∫—Ç —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.",
        TEMPLATE_VALIDATION_FAILED: "‚ùå –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö.",
        TEMPLATE_OPERATION_SUCCESS: "‚úÖ –û–ø–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ.",
        TEMPLATE_OPERATION_FAILED: "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é.",
        
        # –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
        TEMPLATE_CONFIRM_DELETE: """
‚ö†Ô∏è **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è**

–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å {object_type} "{object_name}"?

–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.
        """,
        
        TEMPLATE_CONFIRM_ACTION: """
‚ö†Ô∏è **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è**

–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ {action} {object_type} "{object_name}"?
        """,
        
        # –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –ø–æ–º–æ—â—å
        TEMPLATE_WELCOME: """
üëã **–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ë–æ—Ç —ç–ª–µ–∫—Ç—Ä–∏–∫–∏!**

–Ø –ø–æ–º–æ–≥—É –≤–∞–º —É–ø—Ä–∞–≤–ª—è—Ç—å –æ–±—ä–µ–∫—Ç–∞–º–∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –∏ –º–æ–Ω—Ç–∞–∂–∞ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏—Ö —Å–∏—Å—Ç–µ–º.

üìã **–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
‚Ä¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞–º–∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è
‚Ä¢ –£—á–µ—Ç –º–æ–Ω—Ç–∞–∂–Ω—ã—Ö —Ä–∞–±–æ—Ç
‚Ä¢ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –∏ –¢–û
‚Ä¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π
‚Ä¢ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–ù–∞–ø–∏—à–∏—Ç–µ /help –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∫–æ–º–∞–Ω–¥ –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ –∏–∑ –º–µ–Ω—é.
        """,
        
        TEMPLATE_HELP: """
üìö **–°–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º**

üõ† **–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:**
/start - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º
/help - –ü–æ–∫–∞–∑–∞—Ç—å —ç—Ç—É —Å–ø—Ä–∞–≤–∫—É
!–∫–æ–º–∞–Ω–¥—ã - –ü–æ–∫–∞–∑–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤–∞–º –∫–æ–º–∞–Ω–¥—ã
!–º–æ–∏_–æ–±—ä–µ–∫—Ç—ã - –ü–æ–∫–∞–∑–∞—Ç—å –æ–±—ä–µ–∫—Ç—ã, –∑–∞ –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –æ—Ç–≤–µ—á–∞–µ—Ç–µ

üîß **–û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ:**
!–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞–º–∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è
!–Ω–∞–ø–æ–º–Ω–∏—Ç—å - –°–æ–∑–¥–∞—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ
!–Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è - –ü–æ–∫–∞–∑–∞—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
!–ø–æ–∏—Å–∫ - –ü–æ–∏—Å–∫ –ø–æ –¥–∞–Ω–Ω—ã–º

‚ö° **–ú–æ–Ω—Ç–∞–∂:**
!–º–æ–Ω—Ç–∞–∂ - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–Ω—Ç–∞–∂–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏
!–ø—Ä–æ–µ–∫—Ç—ã - –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ–µ–∫—Ç–æ–≤
!–∏–∑–º–µ–Ω–µ–Ω–∏—è - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏

üëë **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ (–¥–ª—è –∞–¥–º–∏–Ω–æ–≤):**
!—Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞
!—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
!—Ñ–∞–π–ª—ã - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞—Ä—Ö–∏–≤–æ–≤ —Ñ–∞–π–ª–æ–≤
!–∫—ç—à - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—ç—à–µ–º

üí° **–°–æ–≤–µ—Ç—ã:**
‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
‚Ä¢ –í –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –º–æ–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å !—Å—Ç–æ–ø –¥–ª—è –æ—Ç–º–µ–Ω—ã
‚Ä¢ –§–æ—Ä–º–∞—Ç –¥–∞—Ç: –î–î.–ú–ú.–ì–ì–ì–ì
        """,
        
        TEMPLATE_COMMANDS_LIST: """
üìã **–î–æ—Å—Ç—É–ø–Ω—ã–µ –≤–∞–º –∫–æ–º–∞–Ω–¥—ã:**

{commands_list}

üí° –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º ! –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ –∏–∑ –º–µ–Ω—é.
        """,
        
        # –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã
        "service_main": """
üîß **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ–º**

–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–≥–∏–æ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π:

{regions_list}

üìù –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Ä–µ–≥–∏–æ–Ω–∞ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–°–æ–∑–¥–∞—Ç—å".
        """,
        
        "service_region": """
üèô **–†–µ–≥–∏–æ–Ω: {region_name}**

–û–±—ä–µ–∫—Ç—ã –≤ —Ä–µ–≥–∏–æ–Ω–µ:

{objects_list}

üìù –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–°–æ–∑–¥–∞—Ç—å".
        """,
        
        "service_object": """
üè¢ **–û–±—ä–µ–∫—Ç: {object_name}**

üìÑ –î–æ–∫—É–º–µ–Ω—Ç: {document_type} ‚Ññ {contract_number}
üìÖ –î–∞—Ç–∞: {contract_date}
üóì –°—Ä–æ–∫–∏: —Å {start_date} –¥–æ {end_date}

üìç –ê–¥—Ä–µ—Å–∞:
{addresses}

üî• –°–∏—Å—Ç–µ–º—ã: {systems}

üõ† –ó–ò–ü: {zip_info}
üìû –î–∏—Å–ø–µ—Ç—á–µ—Ä–∏–∑–∞—Ü–∏—è: {dispatch_info}
üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è: {notes}
        """,
        
        "installation_main": """
‚ö° **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–Ω—Ç–∞–∂–æ–º**

–î–æ—Å—Ç—É–ø–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –º–æ–Ω—Ç–∞–∂–∞:

{objects_list}

üìù –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–°–æ–∑–¥–∞—Ç—å".
        """,
        
        "installation_object": """
üèó **–û–±—ä–µ–∫—Ç –º–æ–Ω—Ç–∞–∂–∞: {object_name}**

üìÑ –î–æ–∫—É–º–µ–Ω—Ç: {document_type} ‚Ññ {contract_number}
üìÖ –î–∞—Ç–∞: {contract_date}
üóì –°—Ä–æ–∫–∏: —Å {start_date} –¥–æ {end_date}

üìç –ê–¥—Ä–µ—Å: {address}

‚ö° –°–∏—Å—Ç–µ–º—ã: {systems}
üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è: {notes}
        """,
        
        "search_results": """
üîç **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –ø–æ –∑–∞–ø—Ä–æ—Å—É: "{query}"**

–ù–∞–π–¥–µ–Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤: {total_count}

{results_list}

üìÑ –°—Ç—Ä–∞–Ω–∏—Ü–∞ {current_page} –∏–∑ {total_pages}
        """,
        
        "no_results": """
üîç **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞**

–ü–æ –∑–∞–ø—Ä–æ—Å—É "{query}" –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.

üí° –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å.
        """,
        
        "reminder_list": """
‚è∞ **–í–∞—à–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è**

–ë–ª–∏–∂–∞–π—à–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è (30 –¥–Ω–µ–π):

{reminders_list}

üìù –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É !–Ω–∞–ø–æ–º–Ω–∏—Ç—å
        """,
        
        "file_upload_success": """
‚úÖ **–§–∞–π–ª –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ**

üìÅ –ò–º—è —Ñ–∞–π–ª–∞: {filename}
üìè –†–∞–∑–º–µ—Ä: {size_mb:.2f} MB
üìã –¢–∏–ø: {file_type}
üìç –ü—É—Ç—å: {file_path}

–§–∞–π–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –∞—Ä—Ö–∏–≤ –∏ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω –∫ –æ–±—ä–µ–∫—Ç—É.
        """,
        
        "timeout_warning": """
‚è± **–í–Ω–∏–º–∞–Ω–∏–µ**

–î–∏–∞–ª–æ–≥ –±—É–¥–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω —á–µ—Ä–µ–∑ {minutes} –º–∏–Ω—É—Ç –∏–∑-–∑–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.

üí° –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ –≤–≤–æ–¥ –∏–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ !—Å—Ç–æ–ø –¥–ª—è –æ—Ç–º–µ–Ω—ã.
        """,
        
        "timeout_expired": """
‚è± **–î–∏–∞–ª–æ–≥ –∑–∞–≤–µ—Ä—à–µ–Ω**

–î–∏–∞–ª–æ–≥ –∑–∞–≤–µ—Ä—à–µ–Ω –ø–æ —Ç–∞–π–º–∞—É—Ç—É (120 –º–∏–Ω—É—Ç –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏).

üí° –í—ã –º–æ–∂–µ—Ç–µ –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ.
        """,
        
        "fsm_blocked": """
‚ùå **–ö–æ–º–∞–Ω–¥–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞**

–°–Ω–∞—á–∞–ª–∞ –∑–∞–≤–µ—Ä—à–∏—Ç–µ —Ç–µ–∫—É—â–∏–π –≤–≤–æ–¥ (!–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ, !–º–æ–Ω—Ç–∞–∂ –∏ —Ç.–¥.).

üí° –ù–∞–ø–∏—à–∏—Ç–µ !—Å—Ç–æ–ø –¥–ª—è –æ—Ç–º–µ–Ω—ã —Ç–µ–∫—É—â–µ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è.
        """,
        
        "cache_cleared": """
üßπ **–ö—ç—à –æ—á–∏—â–µ–Ω**

–ö—ç—à —É—Å–ø–µ—à–Ω–æ –æ—á–∏—â–µ–Ω:
‚Ä¢ –£–¥–∞–ª–µ–Ω–æ –∫–ª—é—á–µ–π: {keys_count}
‚Ä¢ –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–æ –ø–∞–º—è—Ç–∏: {memory_freed}

üîÑ –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º –∫—ç—à–µ–º.
        """,
        
        "export_success": """
üìä **–≠–∫—Å–ø–æ—Ä—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ**

–§–∞–π–ª —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –≤ Excel:
üìÅ –ò–º—è —Ñ–∞–π–ª–∞: {filename}
üìè –†–∞–∑–º–µ—Ä: {size_mb:.2f} MB
üìã –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö: {data_type}
üìä –ó–∞–ø–∏—Å–µ–π: {records_count}

–§–∞–π–ª –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è.
        """,
    }
    
    @classmethod
    def get_template(
        cls,
        template_key: str,
        lang: str = "ru",
        variables: Optional[Dict[str, Any]] = None
    ) -> str:
        """
        –ü–æ–ª—É—á–∞–µ—Ç —à–∞–±–ª–æ–Ω –ø–æ –∫–ª—é—á—É.
        
        Args:
            template_key: –ö–ª—é—á —à–∞–±–ª–æ–Ω–∞
            lang: –Ø–∑—ã–∫ (–ø–æ–∫–∞ —Ç–æ–ª—å–∫–æ ru –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)
            variables: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏
        
        Returns:
            –¢–µ–∫—Å—Ç —à–∞–±–ª–æ–Ω–∞
        """
        # –ü–æ–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º —Ç–æ–ª—å–∫–æ —Ä—É—Å—Å–∫–∏–π
        if lang != "ru":
            lang = "ru"
        
        templates = cls.TEMPLATES_RU
        template = templates.get(template_key, "")
        
        if not template:
            return f"[–®–∞–±–ª–æ–Ω {template_key} –Ω–µ –Ω–∞–π–¥–µ–Ω]"
        
        # –ü–æ–¥—Å—Ç–∞–≤–ª—è–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –µ—Å–ª–∏ –µ—Å—Ç—å
        if variables:
            try:
                template = template.format(**variables)
            except KeyError as e:
                # –ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, –æ—Å—Ç–∞–≤–ª—è–µ–º –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä
                pass
        
        return template.strip()
    
    @classmethod
    def format_list(
        cls,
        items: list,
        empty_message: str = "–ù–µ—Ç —ç–ª–µ–º–µ–Ω—Ç–æ–≤",
        numbered: bool = True
    ) -> str:
        """
        –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Å–ø–∏—Å–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤.
        
        Args:
            items: –°–ø–∏—Å–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
            empty_message: –°–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –ø—É—Å—Ç–æ–º —Å–ø–∏—Å–∫–µ
            numbered: –ù—É–º–µ—Ä–æ–≤–∞—Ç—å –ª–∏ —ç–ª–µ–º–µ–Ω—Ç—ã
        
        Returns:
            –û—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫
        """
        if not items:
            return empty_message
        
        result = []
        for i, item in enumerate(items, 1):
            prefix = f"{i}. " if numbered else "‚Ä¢ "
            result.append(f"{prefix}{item}")
        
        return "\n".join(result)
    
    @classmethod
    def format_addresses(cls, addresses: list) -> str:
        """
        –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Å–ø–∏—Å–æ–∫ –∞–¥—Ä–µ—Å–æ–≤.
        
        Args:
            addresses: –°–ø–∏—Å–æ–∫ –∞–¥—Ä–µ—Å–æ–≤
        
        Returns:
            –û—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–¥—Ä–µ—Å—ã
        """
        return cls.format_list(addresses, "–ê–¥—Ä–µ—Å–∞ –Ω–µ —É–∫–∞–∑–∞–Ω—ã")
    
    @classmethod
    def format_systems(cls, systems: list) -> str:
        """
        –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Å–ø–∏—Å–æ–∫ —Å–∏—Å—Ç–µ–º.
        
        Args:
            systems: –°–ø–∏—Å–æ–∫ —Å–∏—Å—Ç–µ–º
        
        Returns:
            –û—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã
        """
        if not systems:
            return "–°–∏—Å—Ç–µ–º—ã –Ω–µ —É–∫–∞–∑–∞–Ω—ã"
        
        return " ‚Ä¢ ".join(systems)
    
    @classmethod
    def format_yes_no(cls, value: bool, yes_text: str = "–µ—Å—Ç—å", no_text: str = "–Ω–µ—Ç") -> str:
        """
        –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –¥–∞/–Ω–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ.
        
        Args:
            value: –ë—É–ª–µ–≤–æ –∑–Ω–∞—á–µ–Ω–∏–µ
            yes_text: –¢–µ–∫—Å—Ç –¥–ª—è True
            no_text: –¢–µ–∫—Å—Ç –¥–ª—è False
        
        Returns:
            –û—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
        """
        return yes_text if value else no_text
    
    @classmethod
    def format_notes(cls, notes: str) -> str:
        """
        –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –ø—Ä–∏–º–µ—á–∞–Ω–∏—è.
        
        Args:
            notes: –ü—Ä–∏–º–µ—á–∞–Ω–∏—è
        
        Returns:
            –û—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è
        """
        if not notes or notes.lower() == "–Ω–µ—Ç":
            return "–ü—Ä–∏–º–µ—á–∞–Ω–∏–π –Ω–µ—Ç"
        
        return notes